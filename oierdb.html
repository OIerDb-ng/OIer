<script>
// <![CDATA[
	OIerDb.upstream_sha512 = '{{upstream_sha512}}';
// ]]>
</script>
<div class="ui main container" id="main" style="padding-top: 1.5em; padding-bottom: 1.5em">
	<div class="ui tabular menu" id="tabs">
		<a class="item active" data-tab="tab-main">主 UI</a>
		<a class="item" data-tab="tab-js-intro">JS 使用方式</a>
		<a class="item" data-tab="tab-js-api">JS 详细接口概述</a>
	</div>
	<div class="ui tab segment active" data-tab="tab-main">
		<div class="ui pink message">目前 CSP2021 的数据已经更新完毕。</div>
		<div class="ui pink message">
			<p>学校信息已合并完成。如有问题可以提出 Issue 或 Pull request。仓库地址请点击下面的鸽子。</p>
			<p>如果条件允许，尽量<strong>在 oierdb-ng 分支</strong>提出 Pull request，方便审查与合并。</p>
		</div>
		<div class="ui pink message">现在招一些前端工程师，如有兴趣欢迎加入 <a href="https://github.com/OIerDb-ng" target="_blank">OIerDb-ng</a>。</div>
		<a href="https://github.com/OIerDb-ng/OIer/tree/oierdb-ng" style="font-size: 72px; line-height: 1" target="_blank">🕊</a>
	</div>
	<div class="ui tab segment" data-tab="tab-js-intro">
		<h3 class="ui dividing header">Javascript 使用方式</h3>
		<p>打开 Javascript 控制台，执行 <code>await OIerDb.init()</code>，直到控制台返回 <code>true</code> 并看到“预处理时长”字样。</p>
		<p style="color: red">（注1：如果预处理失败了，控制台会返回原因）</p>
		<p style="color: red">（注2：第一次执行或数据更新时可能较慢（因为要下载数据），其余情况会利用缓存，大约在 300 ~ 500 ms）</p>
		<p>预处理成功后，可以通过 <code>OIerDb.contests</code> 访问比赛信息，<code>OIerDb.oiers</code> 访问选手信息，<code>OIerDb.schools</code> 访问学校信息。</p>
		<h3 class="ui dividing header">一些便捷的语法糖</h3>
		<div class="ui ordered list">
			<div class="item">
				<div class="header"><code>OIerDb.ofInitials(&lt;<em>initials</em>&gt;, [<em>rank</em> = 0])</code></div>
				<div class="description">
					根据首字母寻找 OIer。
					<div class="list">
						<div class="item">
							<div class="header">initials</div>
							<div class="description">必须，姓名的首字母字符串。</div>
						</div>
						<div class="item">
							<div class="header">rank</div>
							<div class="description">可选，如果为自然数，则表示返回所有首字母为 <code>initials</code> 的 OIer 中排名为 <code>rank</code> 者（下标从 0 开始）。否则返回所有首字母为 <code>initials</code> 的 OIer 列表，<strong>默认为 0</strong>。</div>
						</div>
					</div>
					示例：
					<pre class="ui segment sh_js_repl" style="font-size: 12px; overflow: auto; padding-left: .4em"><span class="input"><i class="icon"></i>await OIerDb.init();</span>
|<i class="icon"></i>预处理时长: 300 ms
|<span class="output"><i class="icon"></i>true</span>
|<span class="input"><i class="icon"></i>OIerDb.ofInitials('wzy');</span>
|<span class="output"><i class="icon"></i><i class="caret right icon"></i>{ccf_level: 10, ccf_score: 679.43, enroll_middle: 2015, gender: 1, initials: "wzy", …}</span>
|<span class="input"><i class="icon"></i>OIerDb.ofInitials('wzy', 1);</span>
|<span class="output"><i class="icon"></i><i class="caret right icon"></i>{ccf_level: 9, ccf_score: 483.7, enroll_middle: 2015, gender: 1, initials: "wzy", …}</span>
|<span class="input"><i class="icon"></i>OIerDb.ofInitials('wzy', -1);</span>
|<span class="output"><i class="icon"></i><i class="caret right icon"></i>{ccf_level: 4, ccf_score: 0, enroll_middle: 2014, gender: 1, initials: "wzy", …}</span>
|<span class="input"><i class="icon"></i>OIerDb.ofInitials('wzy', 'all');</span>
|<span class="output"><i class="icon"></i><i class="caret down icon"></i>(226) [{…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, …]
|<i class="icon"></i><i class="icon"></i><i class="caret down icon"></i>[0 … 99]
|<i class="icon"></i><i class="icon"></i><i class="icon"></i><i class="caret right icon"></i><span class="sh_property">0</span>: {ccf_level: 10, ccf_score: 679.43, enroll_middle: 2015, gender: 1, initials: "wzy", …}
|<i class="icon"></i><i class="icon"></i><i class="icon"></i><i class="caret right icon"></i><span class="sh_property">1</span>: {ccf_level: 9, ccf_score: 483.7, enroll_middle: 2015, gender: 1, initials: "wzy", …}
|<i class="icon"></i><i class="icon"></i><i class="icon"></i><i class="caret right icon"></i><span class="sh_property">2</span>: {ccf_level: 9, ccf_score: 742.93, enroll_middle: 2015, gender: 1, initials: "wzy", …}
|<i class="icon"></i><i class="icon"></i><i class="icon"></i><i class="caret right icon"></i><span class="sh_property">3</span>: {ccf_level: 8, ccf_score: 356.14, enroll_middle: 2016, gender: 1, initials: "wzy", …}
|<i class="icon"></i><i class="icon"></i><i class="icon"></i>// 以下省略 96 行
|<i class="icon"></i><i class="icon"></i><i class="caret right icon"></i>[100 … 199]
|<i class="icon"></i><i class="icon"></i><i class="caret right icon"></i>[200 … 225]
|<i class="icon"></i><i class="icon"></i><i class="icon"></i><span class="sh_property">length</span>: 226</span>
|</pre>
				</div>
			</div>
		</div>
	</div>
	<div class="ui tab segment" data-tab="tab-js-api">
		<h3 class="ui dividing header">Javascript 详细接口概述</h3>
		<p>共 5 种类型，<code>Counter</code>，<code>Contest</code>，<code>OIer</code>，<code>Record</code> 和 <code>School</code>，分别为统计器，比赛，选手，一条记录和学校，接口如下：</p>
		<div class="ui ordered list">
			<div class="item">
				<code>Counter</code>：
				<div class="list">
					<div class="item">
						<div class="header">clear()</div>
						<div class="description">清空统计器。</div>
					</div>
					<div class="item">
						<div class="header">dict</div>
						<div class="description">数据字典，为 <code>Object</code> 类型。</div>
					</div>
					<div class="item">
						<div class="header">get(key)</div>
						<div class="description">获取 <code>key</code> 的数量。</div>
					</div>
					<div class="item">
						<div class="header">least_common(n)</div>
						<div class="description">获取前 n 少的数据。</div>
					</div>
					<div class="item">
						<div class="header">length()</div>
						<div class="description">获取不同的数据种数。</div>
					</div>
					<div class="item">
						<div class="header">most_common(n)</div>
						<div class="description">获取前 n 多的数据。</div>
					</div>
					<div class="item">
						<div class="header">update(key, value = 1)</div>
						<div class="description">将 <code>key</code> 的数量增加 <code>value</code>。</div>
					</div>
				</div>
			</div>
			<div class="item">
				<code>Contest</code>：
				<div class="list">
					<div class="item">
						<div class="header">contestants</div>
						<div class="description">有记录的所有参赛选手列表，为 <code>Record</code> 类型。</div>
					</div>
					<div class="item">
						<div class="header">fall_semester</div>
						<div class="description">是否在 9 ~ 12 月。</div>
					</div>
					<div class="item">
						<div class="header">id</div>
						<div class="description">比赛的 id，按时间顺序排列。</div>
					</div>
					<div class="item">
						<div class="header">level_counts</div>
						<div class="description">（所有记录中）各奖项获得人数，为 <code>Counter</code> 类型。</div>
					</div>
					<div class="item">
						<div class="header">n_contestants()</div>
						<div class="description">参赛总人数（不一定等于 <code>contestants.length</code>）。</div>
					</div>
					<div class="item">
						<div class="header">name</div>
						<div class="description">比赛名称（用缩写表示）。</div>
					</div>
					<div class="item">
						<div class="header">school_year()</div>
						<div class="description">该比赛的<strong>学年</strong>（如 NOIP2020 和 NOI2021 均返回 2020）。</div>
					</div>
					<div class="item">
						<div class="header">type</div>
						<div class="description">比赛类型。</div>
					</div>
					<div class="item">
						<div class="header">year</div>
						<div class="description">比赛举办年份。</div>
					</div>
				</div>
			</div>
			<div class="item">
				<code>OIer</code>：
				<div class="list">
					<div class="item">
						<div class="header">ccf_level</div>
						<div class="description">选手的 CCF 评级。</div>
					</div>
					<div class="item">
						<div class="header">ccf_score</div>
						<div class="description">选手的 CCF 评分。</div>
					</div>
					<div class="item">
						<div class="header">enroll_middle</div>
						<div class="description">选手的初中入学年份。</div>
					</div>
					<div class="item">
						<div class="header">gender</div>
						<div class="description">选手的性别（男为 1，女为 -1，其它或可能跨性别为 0）。</div>
					</div>
					<div class="item">
						<div class="header">initials</div>
						<div class="description">选手姓名的拼音首字母。</div>
					</div>
					<div class="item">
						<div class="header">name</div>
						<div class="description">选手姓名。</div>
					</div>
					<div class="item">
						<div class="header">oierdb_score</div>
						<div class="description">选手的 OIerDb 评分，衰变起点取为 2000 年。</div>
					</div>
					<div class="item">
						<div class="header">provinces</div>
						<div class="description">选手参加的所有比赛的省份集合。</div>
					</div>
					<div class="item">
						<div class="header">rank</div>
						<div class="description">选手在 OIerDb 上的当前排名<span style="color: fuchsia">（从 0 开始）</span>。</div>
					</div>
					<div class="item">
						<div class="header">records</div>
						<div class="description">选手参加的所有（获奖）比赛的记录列表，为 <code>Record</code> 类型。</div>
					</div>
					<div class="item">
						<div class="header">uid</div>
						<div class="description">选手在 OIerDb 中的唯一 ID<strong style="color: red">（注意姓名可以重复，<code>uid</code> 不会重复）</strong>。</div>
					</div>
				</div>
			</div>
			<div class="item">
				<code>Record</code>：
				<div class="list">
					<div class="item">
						<div class="header">contest</div>
						<div class="description">记录所在的比赛，为 <code>Contest</code> 类型。</div>
					</div>
					<div class="item">
						<div class="header">level</div>
						<div class="description">记录对应的奖项名称，如“一等奖”、“金牌”。</div>
					</div>
					<div class="item">
						<div class="header">oier</div>
						<div class="description">记录对应的选手，为 <code>OIer</code> 类型。</div>
					</div>
					<div class="item">
						<div class="header">province</div>
						<div class="description">记录时参赛者所在省份。</div>
					</div>
					<div class="item">
						<div class="header">school</div>
						<div class="description">记录时参赛者所在学校，为 <code>School</code> 类型。</div>
					</div>
					<div class="item">
						<div class="header">score</div>
						<div class="description">该记录中选手获得的分数，<strong style="color: red">对于一些比赛，该字段可能不存在</strong>。</div>
					</div>
					<div class="item">
						<div class="header">rank</div>
						<div class="description">该记录中选手获得的排名<span style="color: fuchsia">（从 1 开始）</span>。</div>
					</div>
				</div>
			</div>
			<div class="item">
				<code>School</code>：
				<div class="list">
					<div class="item">
						<div class="header">award_counts</div>
						<div class="description">记录该学校在各个比赛中各奖项获奖人数，访问方式如 <code>school.award_counts[contest.type][contest.year].get('一等奖')</code>。</div>
					</div>
					<div class="item">
						<div class="header">city</div>
						<div class="description">学校所在城市（地级行政区）。</div>
					</div>
					<div class="item">
						<div class="header">id</div>
						<div class="description">学校的 id，<strong style="color: red">按登记顺序排列</strong>。</div>
					</div>
					<div class="item">
						<div class="header">members</div>
						<div class="description">（有记录的）学校的所有成员，为 <code>OIer</code> 类型。</div>
					</div>
					<div class="item">
						<div class="header">name</div>
						<div class="description">（登记的）学校规范全称。</div>
					</div>
					<div class="item">
						<div class="header">province</div>
						<div class="description">学校所在省份（省级行政区）。</div>
					</div>
					<div class="item">
						<div class="header">rank</div>
						<div class="description">学校在 OIerDb 上的当前排名<span style="color: fuchsia">（从 0 开始）</span>。</div>
					</div>
					<div class="item">
						<div class="header">records</div>
						<div class="description">学校的所有记录，为 <code>Record</code> 类型。</div>
					</div>
					<div class="item">
						<div class="header">score</div>
						<div class="description">学校的 OIerDb 评分，衰变起点取为 2000 年。</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>
